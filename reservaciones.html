<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>La Mozza - Reservaciones</title>
    <link rel="stylesheet" href="reservaciones.css" />
</head>
<body>

<header>
    <div class="logo-container">
        <img src="logoh.png" alt="Logo La Mozza" />
        <div class="logo-text">LA MOZZA</div>
    </div>
    <nav class="navbar">
        <a href="index.html">HOGAR</a>
        <a href="pedidos.html">PEDIDOS</a>
        <a href="reservaciones.html">RESERVACIONES</a>
        <a href="contacto.html">CONTACTO</a>
    </nav>
</header>

<main>
    <section id="reserva-container">
        <div id="plano-local">
            <h2>Plano del local</h2>
            <div class="plano">
                <div class="mesa" style="top: 20px; left: 30px;" onclick="seleccionarMesa(1)">1</div>
                <div class="mesa" style="top: 20px; left: 100px;" onclick="seleccionarMesa(2)">2</div>
                <div class="mesa" style="top: 100px; left: 50px;" onclick="seleccionarMesa(3)">3</div>
                <!-- Agrega las mesas adicionales aquí -->
            </div>
        </div>

        <div id="info-mesa">
            <h2>Reservar</h2>
            <p id="mesa-seleccionada">Seleccioná una mesa...</p>
            <label for="fecha">Fecha:</label>
            <input type="date" id="fecha" onchange="cargarHorarios()" />
            <div id="horarios"></div>
            <div id="pedido" style="display: flex; justify-content: center; gap: 10px;">
                <p>¿Querés encargar la pizza?</p>
                <button onclick="encargarPizza(true)">Encargar ahora</button>
                <button onclick="encargarPizza(false)">Pedir en el local</button>
            </div>
        </div>
    </section>

    <!-- Contenedor para el menú de pizzas -->
    <div id="menu-pizzas" style="display: none; position: absolute; top: 0; right: 0;">
        <h2>Menú de Pizzas</h2>
        <div id="contenido-menu"></div>
        <div id="botones-pago" style="display: none;">
            <button id="pagar-ahora">Pagar ahora</button>
            <button id="pagar-local">Pagar en el local</button>
        </div>
    </div>
</main>

<footer>
    <div class="footer-checkered"></div>
    <p>&copy; 2025 La Mozza. Todos los derechos reservados.</p>
</footer>

<script>
    let mesaSeleccionada = null;

    function seleccionarMesa(num) {
        mesaSeleccionada = num;
        document.getElementById('mesa-seleccionada').textContent = "Mesa seleccionada: " + num;
        document.getElementById('horarios').innerHTML = "";
        document.getElementById('fecha').value = "";
    }

    function cargarHorarios() {
        if (!mesaSeleccionada) {
            alert("Seleccioná una mesa primero.");
            return;
        }

        const fecha = document.getElementById('fecha').value;
        if (!fecha) return;

        const horarios = ["19:00", "20:00", "21:00", "22:00"];
        let html = "<p>Horarios disponibles:</p><ul>";

        horarios.forEach(h => {
            html += `<li><label><input type="radio" name="horario" value="${h}" /> ${h}</label></li>`;
        });

        html += "</ul>";
        document.getElementById('horarios').innerHTML = html;
    }

    function encargarPizza(encargar) {
        if (!mesaSeleccionada || !document.querySelector('input[name="horario"]:checked')) {
            alert("Seleccioná mesa y horario.");
            return;
        }

        const horario = document.querySelector('input[name="horario"]:checked').value;

        // Mostrar el menú de pizzas
        document.getElementById('menu-pizzas').style.display = 'block';

        // Mostrar el mensaje de reserva confirmada después de cargar el menú
        alert(`Reserva confirmada para Mesa ${mesaSeleccionada} a las ${horario}. Pizza: ${encargar ? "encargada" : "se pedirá en el local"}`);

        // Cargar el menú de pizzas
        fetch('https://lamozza.github.io/PizzeriaMOZZA/pedidos.html')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.text();
            })
            .then(data => {
                // Crear un contenedor temporal para el HTML
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = data;

                // Extraer el contenido del menú de pizzas
                const menuContent = tempDiv.querySelector('.menu'); // Cambiado a '.menu'
                if (menuContent) {
                    document.getElementById('contenido-menu').innerHTML = menuContent.innerHTML;
                    // Mostrar los botones de pago
                    document.getElementById('botones-pago').style.display = 'block';
                } else {
                    alert('No se encontró el contenido del menú de pizzas.');
                }
            })
            .catch(error => {
                console.error('Error al cargar el menú de pizzas:', error);
                alert('No se pudo cargar el menú de pizzas. Intenta nuevamente más tarde.');
            });
    }
</script>

</body>
</html>
